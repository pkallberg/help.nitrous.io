<!DOCTYPE html>
<html class="home index">
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset='utf-8'>
  <meta name='viewport' content='width=device-width, initial-scale=1.0'>
  <title>Postgres</title>
  <meta name="author" content="Nitrous.IO" />
  <link href="http://feeds.feedburner.com/actionioblog" rel="alternate" title="Nitrous.IO Blog" type="application/atom+xml" />
  <meta content='Nitrous.IO Support Documentation. Tutorials, FAQ, and other guides for building your apps directly on Nitrous.IO' name='description'>
  <meta content='Nitrous.IO' name='author'>

  <link href='http://fonts.googleapis.com/css?family=Open+Sans:300' rel='stylesheet' type='text/css'>

  <link rel='stylesheet' href='/css/bootstrap3/css/bootstrap.css'>
  <link rel='stylesheet' href='/css/font-awesome/css/font-awesome.css'>
  <link href="/css/action.css" media="screen, projection" rel="stylesheet">
  <link href='/favicon.ico' rel='shortcut icon' type='image/x-icon'>
</head>
<body>
  <div class="navbar">
    <div class="container">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">Nitrous.IO <span>support</span></a>

      <div class="nav-collapse collapse navbar-responsive-collapse">
        <ul class="nav navbar-nav pull-right">
          <div class="mobile-menu">
            <li class="signup"><a href="/" class="btn btn-success">Help center</a></li>
            <li class="signup"><a href="/getting-started/" class="btn btn-success">Getting Started</a>
            <li class="signup"><a href="/categories/boxes/" class="btn btn-success">Boxes</a>
            <li class="signup"><a href="/categories/usage/" class="btn btn-success">Usage</a>
            <li class="signup"><a href="/categories/databases/" class="btn btn-success">Databases</a>
            <li class="signup"><a href="/categories/previewing/" class="btn btn-success">Preview</a>
            <li class="signup"><a href="/categories/deployment/" class="btn btn-success">Deploy</a>
            <li class="signup"><a href="/categories/faq" class="btn btn-success">FAQ</a>
            <li class="signup"><a href="mailto:help@nitrous.io" class="btn btn-success">Email us</a></li>
          </div>

          <li class="hidden-sm"><a href="/discussions">Discussions</a></li>
          <li class="hidden-sm"><a href="https://www.nitrous.io/chat" target="_blank">Chat</a></li>
          <li class="hidden-sm login"><a href="https://nitrous.io/users/sign_in">Log in</a></li>
          <li class="hidden-sm nav-break">or</li>
          <li class="signup"><a href="https://www.nitrous.io" class="btn btn-success">Sign up</a></li>
        </ul>
      </div>
    </div>
  </div>
  <div class="container">
    <div class='clearfix' id='promo-main'>
  <div class="mast-container">
    <div id="search">
      <script>
      (function() {
        var cx = '009198278762462778395:pwuaikni4bs';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//www.google.com/cse/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
      </script>
      <gcse:search></gcse:search>
    </div>
  </div>
</div>
    <div class="sidebar">
      <div class="box menu">
        <ul class="nav nav-list">
  <li><i class="icon-signin"></i><a href="/categories/getting-started/">Getting Started</a></li>
    <ul>
      <li><a href="/categories/ssh/">Adding SSH Keys</a>
      <li><a href="/github-add-key/">Connecting to Github</a>
      <li><a href="/ide-general/">Web IDE Overview</a>
      <li><a href="/best-practices">Best Practices</a>
    </ul>
  <li><i class="icon-th-large"></i><a href="/categories/boxes/">Boxes</a></li>
    <ul>
      <li><a href="/box-new">Create a Box</a>
      <li><a href="/box-settings/">Box Memory & Storage</a>
      <li><a href="/box-templates/">Box Templates</a>
      <li><a href="/box-interpreters-and-tools/">Included Tools</a>
      <li><a href="/upgrade-box">Update Box</a>
    </ul>
  <li><i class="icon-laptop"></i><a href="/categories/usage/">Usage</a></li>
    <ul>
      <li><a href="/autoparts/">Package Manager</a>
      <li><a href="/mac-preferences/">Mac Preferences</a>
      <li><a href="/ide-shortcuts/">Keyboard Shortcuts</a>
      <li><a href="/new-file/">Create New File</a>
      <li><a href="/ide-file-uploads/">Uploading via Web IDE</a>
      <li><a href="/collab">Collaboration</a>
    </ul>
  <li><i class="icon-tasks"></i><a href="/categories/databases/">Databases</a></li>
    <ul>
      <li><a href="/memcached/">Memcached</a>
      <li><a href="/mongodb/">MongoDB</a>
      <li><a href="/mysql/">MySQL</a>
      <li><a href="/postgresql/">PostgreSQL</a>
      <li><a href="/redis/">Redis</a>
    </ul>
  <li><i class="icon-play"></i><a href="/categories/previewing/">Preview</a></li>
    <ul>
      <li><a href="/preview">Previewing Your App</a>
      <li><a href="/websockets">WebSockets</a>
      <li><a href="/faq-disconnect">Run App Continuously</a>
      <li><a href="/faq-localhost">Preview Issues</a>
    </ul>
  <li><i class="icon-share-alt"></i><a href="/categories/deployment/">Deploy</a></li>
    <ul>
      <li><a href="/heroku/">Heroku</a>
      <li><a href="/app-engine">App Engine</a>
      <li><a href="/azure-sites">Azure Sites</a>
      <li><a href="/nodejitsu">Nodejitsu</a>
    </ul>
  <li><i class="icon-book"></i><a href="#">Additional Resources</a></li>
    <ul>
      <li><a href="/categories/faq">FAQ</a>
      <li><a href="/categories/privacy-and-terms/">Privacy & Terms</a>
    </ul>
</ul>

      </div>
    </div>
    <div class="articles post-content">
      <div class="page-title">
        <h2> Postgres </h2>
        <h5 class="note">Last Updated on: 28 June 2013</h5>
      </div>
      <p>This guide walks through how you can setup a Heroku Postgres database on your Nitrous.IO box.</p>

<h3 id='create_a_database_on_heroku_postgres'>Create a Database on Heroku Postgres</h3>

<p>In: <a href='https://postgres.heroku.com'>Heroku Postgres</a></p>

<p><img alt='Heroku Postgres Homepage' src='https://raw.github.com/action-io/action-assets/master/support/screenshots/postgres/hpgres.png' /></p>

<p>Go ahead and sign into Heroku Postgres. Once in the dashboard, you&#8217;ll see a list of any databases you&#8217;ve already created. Click the &#8220;Create Database&#8221; button on the top-right of the screen. You&#8217;ll see a bunch of professional plans appear below. You can ignore these until you&#8217;ve deployed your new world-changing application to production and you have millions of customers and can afford them.</p>

<p>Heroku knows we need something lightweight to get our feet wet, so for now we&#8217;ll just pick the &#8220;Dev Plan (free)&#8221; option.</p>

<p><img alt='Dev Plan Button' src='https://raw.github.com/action-io/action-assets/master/support/screenshots/postgres/dev-plan.png' /></p>

<p>You&#8217;ll see your new database at the top of your list of databases (or just one if you just created an account). Heroku will create a zen name for you, the one we created happens to have the name &#8220;salty-water-676&#8221;.</p>

<p><img alt='Create Database' src='https://raw.github.com/action-io/action-assets/master/support/screenshots/postgres/create-database.png' /></p>

<p>For clarity lets rename the database so we know it&#8217;s a development database. Click the database you just created to navigate to the database dashboard. Click the database title and a modal will appear where you can change the name of your database. Rename it something relevant to your application, for e.g. if you were to make a to-do app, you can rename it to &#8220;todo-app-dev&#8221;.</p>

<p><img alt='Rename Database' src='https://raw.github.com/action-io/action-assets/master/support/screenshots/postgres/database-rename.png' /></p>

<h3 id='heroku_postgres_connection_settings'>Heroku Postgres Connection Settings</h3>

<p>In the <em>Heroku Postgres</em> website, click your database name (todo-app-dev) to get to the database dashboard. You will see your database connection settings listed, including &#8220;Host&#8221;, &#8220;Database&#8221;, &#8220;User&#8221;, &#8220;Port&#8221;, &#8220;Password&#8221; (you will need to click &#8216;Show&#8217; to reveal your password).</p>

<p><img alt='Heroku Settings' src='https://raw.github.com/action-io/action-assets/master/support/screenshots/postgres/heroku-settings.png' /></p>

<p>Grab each of the values and assign them to environment variables in your &#8220;~/.bashrc&#8221; file on your Nitrous.IO box. This will ensure that every time you log into your Nitrous.IO box, your database credentials will be available as environment variables to use in any of your apps. It is good practice to namespace your environment variables with the environment that you want to use your database in (development or test), like so:</p>

<p><img alt='Env Variables' src='https://raw.github.com/action-io/action-assets/master/support/screenshots/postgres/env-variables.png' /></p>

<p>If you want the environment variables to be loaded immediately, run: source ~/.bashrc</p>

<p>You can verify that your Postgres credentials are loaded correctly by running: echo $TODO_APP_DEV_HOST</p>

<p>This should return &#8220;ec2-107-22-164-225.compute-1.amazonaws.com&#8221;</p>

<h4 id='railsruby'>Rails/Ruby</h4>

<p>You can now access your database in your Rails application by doing the following:</p>

<pre><code>ENV[&#39;TODO_APP_DEV_HOST&#39;]
ENV[&#39;TODO_APP_DEV_PORT&#39;]
ENV[&#39;TODO_APP_DEV_USER&#39;]
ENV[&#39;TODO_APP_DEV_PASSWORD&#39;]
ENV[&#39;TODO_APP_DEV_DATABASE&#39;]</code></pre>

<p>(Please note, you&#8217;ll probably need to install the <a href='http://rubygems.org/gems/pg'>pg</a> Rubygem before you use Postgres in a Rails app, using the following command:</p>

<pre><code>gem install pg</code></pre>

<p>Here&#8217;s an example of database.yml file used in Rails which uses the environment variables to connect to the Heroku Postgres database you created.</p>

<p><img alt='Rails Postgres Settings' src='https://raw.github.com/action-io/action-assets/master/support/screenshots/postgres/database-ruby.png' /></p>

<p>A more detailed tutorial is present on the <a href='http://blog.nitrous.io/2013/02/11/postgres-action-io-3.html'>Nitrous.IO blog</a></p>

<h4 id='nodejs'>Node.JS</h4>

<p>In Node.JS, you can access each of the environment variables by using:</p>

<pre><code>process.env.TODO_APP_DEV_HOST
process.env.TODO_APP_DEV_PORT
process.env.TODO_APP_DEV_USER
process.env.TODO_APP_DEV_PASSWORD
process.env.TODO_APP_DEV_DATABASE</code></pre>

<p>(Please note, you&#8217;ll probably need to install the <a href='https://npmjs.org/package/pg'>pg</a> NPM before you use Postgres in a Node.JS app, using the following command:</p>

<pre><code>npm install -g pg</code></pre>

<p>Here&#8217;s an example nodejs code to connect to Heroku Postgres using the environment variables we have set up.</p>

<p><img alt='Postgres Settings' src='https://raw.github.com/action-io/action-assets/master/support/screenshots/postgres/database-nodejs.png' /></p>

<h4 id='djangopython'>Django/Python</h4>

<p>In Python, you can access each of the environment variables by using:</p>

<pre><code>os.environ[&#39;TODO_APP_DEV_HOST&#39;]
os.environ[&#39;TODO_APP_DEV_PORT&#39;]
os.environ[&#39;TODO_APP_DEV_USER&#39;]
os.environ[&#39;TODO_APP_DEV_PASSWORD&#39;]
os.environ[&#39;TODO_APP_DEV_DATABASE&#39;]</code></pre>

<p>(Please note, you&#8217;ll probably need to install the <a href='http://initd.org/psycopg/'>psycopg2</a> module before you use Postgres in a Django app, using the following command:</p>

<pre><code>pip install --user psycopg2</code></pre>

<p>Here&#8217;s an example of a settings.py file which initializes the Heroku Postgres credentials for use within a Django app.</p>

<p><img alt='Postgres Settings' src='https://raw.github.com/action-io/action-assets/master/support/screenshots/postgres/database-python.png' /></p>
    </div>
</div>
<footer>
  <script src='/javascripts/jquery/jquery-1.10.2.js'></script>
  <script src='/css/bootstrap3/js/bootstrap.js'></script>
</footer>
</body>
</html>
